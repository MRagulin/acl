{% extends "base.html" %}
{% block title %}
    История обращений
{% endblock %}
{% block content %}
     <div class="post">
          <h1 class="title-block">История обращений ACL</h1>
      </div>
 {% if acllists %}
    <div class="p-1 mt-1 w-80">
        <div class="p-1">
            <button class="btn btn-danger btn-remove" disabled>Удалить</button>
        </div>
        <table class="table table-hover table-borderles table-sm table-history" style="border: 1px solid #dee2e6">
          <thead style="background:#efefef;">
            <tr>
              <th>#</th>
              <th></th>
              <th scope="col">Проект</th>
              <th scope="col">Статус</th>
              <th scope="col" class="text-center">Пользователь</th>
              <th scope="col">Дата создания</th>
              <th scope="col">UUID</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody style="cursor: pointer">
              {% for acllist in acllists.object_list %}
            <tr data="{{acllist.id}}">
                <td class="bs">
                        <a class="detail-icon" href="#"><i class="fa fa-plus"></i></a>
                </td>
                 <td class="bs">
                     <label>
                        <input data-index="0" name="btSelectItem" type="checkbox" value="0" data="{{ acllist.id }}">
                        <span></span>
                     </label>
                 </td>
              <td>{{ acllist.project }}</td>
              <td style="max-width: 100px;!important;">
                  <p class="badge
                  {% if acllist.status == 'FL' %}badge-info
                  {% elif acllist.status == 'WTE'%}badge-warning
                  {% elif acllist.status == 'NOTFL'%}badge-light
                  {% elif acllist.status == 'CMP'%}badge-success
                  {% elif acllist.status == 'CNL'%}badge-secondary
                  {% endif %}
                    ">
                      {{ acllist.get_status_display }}
                  </p>
              </td>
              <td>
                  <div class="font-weight-bold text-secondary text-center">
                      {{ acllist.owner.username}}
                  </div>
                  <div class="font-weight-light text-secondary text-center">
                      {{ acllist.owner.department}}
                  </div>
              </td>
              <td>{{ acllist.created}}</td>
              <td class="text-secondary">{{ acllist.id}}</td>
                <td class="text-secondary"><a href="{% url 'aclcreate_urls'%}{{ acllist.id }}/"><i class="fas fa-align-justify mr-2"></i>Подробнее</a></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>

{% if is_paginated %}
 <nav aria-label="Page navigation">
  <ul class="pagination justify-content-end">
    <li class="page-item {% if not prev_url %} disabled {% endif %}">
      <a class="page-link" href="{{ prev_url }}" tabindex="-1">Предыдущая</a>
    </li>
     {% for n in acllists.paginator.page_range %}
         {% if acllists.number  == n %}
            <li class="page-item active"><a class="page-link" href="?page={{ n }}">{{ n }}</a></li>
         {% elif n > acllists.number|add:-3 and n < acllists.number|add:3 %}
            <li class="page-item"><a class="page-link" href="?page={{ n }}">{{ n }}</a></li>
         {% endif %}
     {% endfor %}
      <li class="page-item {% if not next_url %} disabled {% endif %}">
      <a class="page-link" tabindex="-1" href="{{ next_url }}">Следующая</a>
      </li>
  </ul>
</nav>
{% endif %}
     </div>
      {% else %}
            <div class="post">
                        <div class="post-header">
                            <p>Ничего не найдено</p>
                        </div>
                    </div>
    {% endif %}
{% endblock %}
